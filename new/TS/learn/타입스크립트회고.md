# 타입스크립트 회고

<br>

## 목차

- intro
- 학습 정리
- refrence
- 프로젝트에서 적용이 가능할까?

<br>

## intro 

최근 타입스크립트에 대한 자료들을 보며, 타입스크립트를 기초 레벨 이상으로 사용하고 있지 않다고 느꼈다.  
[infer, never만 보면 두려워지는 당신을 위한 고급 TypeScript](https://www.youtube.com/watch?v=xesy1i67OWI)  
[타입스크립트 타입 레벨 프로그래밍](https://velog.io/@gomjellie/You-dont-know-type)  

프로젝트에서 타입스크립트를 최대한으로 사용해 보고 싶은데, 학습이 휘발되는 느낌이 들어 글로 정리한다.


<br>





## 학습정리

타입 컴파일러를 통과하면 타입 오류가 없다는 것을 알 수 있다. 오류인 경우 반드시 오류인 것을 보장하지 않는다.
타입스크립트는 구조적 타이핑 (정적 컴파일 단계에서), 자바스크립트는 덕 타이핑 (런타임에서)
형태가 동일하면 같은 타입으로 인식한다.


````
구조적 타이핑이 안되는 경우 
-> object를 변수로 선언하지 않고, 바로 함수 인자로 넘기는 경우

calcCalorie({
    protein: 2;
    carbohydrates: 3;
    fat: 4;
    burgerBrand: "버거킹"
})

아래처럼 index signature를 명시하면 가능함 
type Food = {
    protein: number;
    carbohydrates: number;
    fat: number;
    [x: string]: any       /** index signature */
}

리액트 컴포넌트에서도 쓸 수 있다.

 <CouponNameTextField
    defaultValue={"일렉베리키위쿠폰"}
    a={"dd"}
    b={"ccc"}
    k={1}
 />
 
 const CouponKiwiCouponNameTextField = ({
  defaultValue
}: {
  defaultValue: string;
  [x: string]: any;
}) => {}

````

### 서브타입에 의한 다형성

__추상 메소드__  
implement 하는 클래스에서 메소드를 구현해야 함


__최대 타입__
* unknown

__바닥 타입__
* never

__이거나 타입__  
__이면서 타입__
* 다중 상속 해야 하는 경우

__함수의 서브 타입__   
함수가 값으로 사용될 때 즉 변수에 대입할 수 있고, 함수에 인자로 넘길 수 있고, 반환 값으로 줄 수 있을 때,
함수 간에 서브타입 관계를 따질 수 있다.

```typescript
interface Person { email: string; }
interface Student extends Person { grade: string; }

function sendEmail(needEmail: (st: Student) => boolean, target:  Student): void {
  if(needEmail(target)){
    /* sendEmail */
  }
}

function isHacked(st: Person): boolean {
  return true;
}
function isUnpaid(st: Student): boolean {
  return false;
}

const sungyu: Student = { email: "my", grade: "F" };
sendEmail(isHacked, sungyu);
sendEmail(isUnpaid, sungyu);
```

위 예시는 타입 오류 없이 검사를 통과한다.  
sendEmail의 매개변수인 needEmail 은 Student => boolean 형식인데  
왜 타입 검사기는 Person => boolean 인 isHacked 함수를 통과시킬까?

서브타입이기 때문이다.

1. Student 는 Person 의 서브타입이다.
   * 학생은 사람이다.
2. __Person => boolean 은 Student => boolean 의 서브타입이다.__
   * __사람을 인자로 받는 함수는 학생을 인자로 받을 수 있는 함수다.__ O  
   * 학생을 인자로 받는 함수는 사람을 인자로 받을 수 있는 함수다. X 

사람을 인자로 받는 isHacked 함수는 어떤 학생도 인자로 받을 수 있기에 올바르다.  
공변성, 반공변성, 그것이 정확히 어떤 상황에서 쓰이는지 몰랐는데, 예시로 명확해졌다.  






## reference

### 책
1. 타입으로 견고하게 다형성으로 유연하게
2. 실무로 통하는 타입스크립트


### 자료
1. [infer, never만 보면 두려워지는 당신을 위한 고급 TypeScript](https://www.youtube.com/watch?v=xesy1i67OWI)  

<br>


## 프로젝트에서 적용이 가능할까?

> 내가 타입스크립트로 지금까지 한 작업
* 서버 API request, response 데이터 타입 정의하기
* 필터, 검색 등에 필요한 URL Search Parameter 데이터 타입 정의하기
* 컴포넌트 Props 정의

> 개선하고 싶은 부분
* 타입 설계 잘해서 Props 체계화


> 적용 가능한 부분

<br>


